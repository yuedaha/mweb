# 对象的引用

GC的回收通常是，从GC Roots开始遍历，将不可达的对象回收。但在某些场景下，有些可达的对象也希望被GC回收。所以讲对象的引用分为强引起、软引用、弱引用和虚引用。后三种引用是为了方便开发者通过代码的方式来确定对象的回收时机。

### 强引用（Strong Reference）

如`Object object = new Object();`这样的声明和定义产生的对象引用就是强引用。只要对象有强引用，并且GC Roots可达，即使在内存不够用的时候，也不会被回收。

### 软引用（Soft Reference）

引用力度弱于强引用，是用在非必须的场景下。在即将OOM之前，垃圾回收会把这些软引用所指向的对象加入回收范围，以获得更多的可用内存空间，让程序能够更好的运行。主要用来缓存服务器中间计算结果及不需要实时保存的用户行为等。

### 弱引用（Weak Reference）

比前两种引用力度更弱，也是用来描述非必须对象的。如果弱引用所描述的对象只存在弱引用一条线路，则在下一个YGC时会被回收。由于YGC时间不可确定性，弱引用合适被回收也不可确定。弱引用主要用于指向某个易消失的对象，在强引用断开时，次引用不会劫持对象。调用WeakReference.get()可能会返回null，注意空指针异常。

> 指向常量池的对象不会被回收

### 虚引用（Phantom Reference）

是极弱的一种引用关系，定义完成后，是无法通过改引用获取执行的对象。为一个对象设置虚引用的唯一目的，就是希望在系统回收此对象时，得到一个系统的通知。虚引用必须和队列联合使用，当垃圾回收时，如果发现存在虚引用，就会在回收之前，把这个虚引用加入与之关联的引用队列中。