# 消息中间件

### 一、什么是消息中间件
在互联网架构中，MQ是上下游逻辑解耦和物理隔离的消息通信服务。上游服务只需要去依赖MQ，逻辑上和物理上都不需要依赖其他服务。

消息中间件是利用高效可靠的消息传递机制进行平台无关的数据交流，并基于数据通信来进行分布式系统的集成。通过提供消息的传递和消息的排队，可以在分布式架构下扩展进程之间的通信。

> 程之间的通信可以基于消息

### 二、消息中间件能做什么

消息中间件主要解决的就是分布式系统之间的消息传递问题，它能够屏蔽各种平台以及协议之间的特性，实现应用程序之间的协同。

#### 1、异步操作
消息中间件可以对操作进行异步执行，类似于多线程并行处理。

用多线程处理异步操作时，需要自己实现消息失败重试、消息持久化等一系列相关功能，并且由于和主服务在同一个JVM中，可能对主服务产生影响。而开源的消息中间件已经实现非常多的功能，而且可以单独部署，不会影响主服务。

#### 2、流量削峰
服务器的处理能力是一定的，当服务器接收请求过大，超出了自己的处理能力时，会导致服务的不可用，无法响应请求。所以如果存在某种形式，将这些请求存放在某个地方，让服务器可以根据自己的处理能力，慢慢处理，从而不会导致服务宕机。

消息中间件就是可以作为存储请求的机制，在服务器接收到请求后，讲数据先存储到消息中间件中，然后服务器再去订阅消息中间或者消息中间件通知服务器，服务器获取请求数据进行处理响应。

### 三、消息规范

随着消息中间件的解决方案流行，市场上存在不同的实现的消息中间件。由于不同消息中间件具有不同特点，所以一个项目可能会使用多种消息中间件。由于实现不同，所以对使用者来说需要实现不同的处理，成本较大，不方便维护。消息规范也应运而生。

#### 1、JMS规范


#### 2、AMQP规范

可以针对不同环境下的通信，

##### 3、MQTT规范

小型机上的消息协议。一些小型机由于性能较低，无法使用其他协议。
